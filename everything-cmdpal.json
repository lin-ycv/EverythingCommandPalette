{
    "version":"0.1.0",
    "description":"Adds Everything search to Command Palette.",
    "homepage": "https://github.com/lin-ycv/EverythingCommandPalette",
    "license":"epl-2.0",
    "suggest":{
        "Everything":[
            "extras/everything",
            "versions/everything-alpha"
        ],
        "PowerToys": "extras/powertoys"
    },
    "architecture": {
        "64bit": {
            "url":"https://github.com/lin-ycv/EverythingCommandPalette/releases/download/v0.1.0/VictorLin.EverythingCP_0.1.0.0_x64__yazqh14evg2ve.Msix#/ecp.msix",
            "hash":"c8fed72e7ff3cf59a01447b3bf2e200b55e8f03ee9d1c0b6b84db4e6b072340a"
        }
    },
    "pre_install": [
        "$package = Get-AppxPackage | Where-Object { ($_.Name -match 'Microsoft.WindowsAppRuntime.\\d+') -and ($_.Name -notlike '*CBS*') -and  ([version]$_.Version -ge [version]'6000.401.2352.0')}",
        "if(-not ($package)) {switch($env:PROCESSOR_ARCHITECTURE){ 'ARM64' { $url = 'https://aka.ms/windowsappsdk/1.6/1.6.250228001/windowsappruntimeinstall-arm64.exe' } 'AMD64' { $url = 'https://aka.ms/windowsappsdk/1.6/1.6.250228001/windowsappruntimeinstall-x64.exe' } } Write-Host 'Windows App Runtime is NOT installed, installing package... (This may take a while)'; Invoke-WebRequest -Uri $url -OutFile 'war166.exe'; & '.\\war166.exe' --quiet}",
        "Get-ChildItem -Path 'war166.exe' -ErrorAction SilentlyContinue | Remove-Item -Force"
    ],
    "post_install": [
        "Add-AppxPackage \"$dir\\ecp.msix\"",
        "if(-not (get-appxpackage -Name VictorLin.EverythingCP*)) { get-appxpackage VictorLin.EverythingCP* | remove-appxpackage }"
    ],
    "pre_uninstall":[
        "get-appxpackage VictorLin.EverythingCP* | remove-appxpackage"
    ],
    "checkver":"github",
    "autoupdate":{
        "architecture":{
            "64bit":{
                "url":"https://github.com/lin-ycv/EverythingCommandPalette/releases/download/v$version/VictorLin.EverythingCP_$version.0_x64__yazqh14evg2ve.Msix#/ecp.msix",
                "hash":{
                    "url": "https://github.com/lin-ycv/EverythingCommandPalette/releases/tag/v$version",
                    "regex": "(?s)msix-x64.*?$sha256"
                }
            }
        }
    }
}
